Return-Path: <linux-erofs+bounces-344-lists+linux-erofs=lfdr.de@lists.ozlabs.org>
X-Original-To: lists+linux-erofs@lfdr.de
Delivered-To: lists+linux-erofs@lfdr.de
Received: from lists.ozlabs.org (lists.ozlabs.org [IPv6:2404:9400:2:0:216:3eff:fee1:b9f1])
	by mail.lfdr.de (Postfix) with ESMTPS id D0336ABB35C
	for <lists+linux-erofs@lfdr.de>; Mon, 19 May 2025 04:38:46 +0200 (CEST)
Received: from boromir.ozlabs.org (localhost [127.0.0.1])
	by lists.ozlabs.org (Postfix) with ESMTP id 4b121c4FL7z2ygn;
	Mon, 19 May 2025 12:38:44 +1000 (AEST)
X-Original-To: linux-erofs@lists.ozlabs.org
Authentication-Results: lists.ozlabs.org; arc=none smtp.remote-ip=207.226.244.123
ARC-Seal: i=1; a=rsa-sha256; d=lists.ozlabs.org; s=201707; t=1747622324;
	cv=none; b=DtuzqiAOX8CD685v6EiY1G2Hc8nxauYxlAh9apiu7gyQLF5vXCWfXA1naQKzsUTMx9LM9ELIhLFkd30HWG6nQJyDC8kGWzalED638Tkysve26ArSSpIU0F7WiYxguRFai9hlVqmoIKL/3piy5Wq9PTVro88uQpabNzMNXH9+XQsfpJcA/k47YDYbYAWfTjxuKuNU98QEk7Hd9u2vp6aRIq2MIBYQrIItt2TPS1ed6wPlk8SThdmANezUu+/+6fgsDTL7e/IxrKzN/mYjjmZl3PQbMAENo3FE+AuBvv+MQKt8zMkF+CY4rJtPC29DbQfCLj1wZALQBlCV9RYyvsIx7Q==
ARC-Message-Signature: i=1; a=rsa-sha256; d=lists.ozlabs.org; s=201707;
	t=1747622324; c=relaxed/relaxed;
	bh=Gq2u2XNquXm1dg4m/9jMq5cXrlIpKcpKEIkyfBD3rkU=;
	h=From:To:CC:Subject:Date:Message-ID:References:In-Reply-To:
	 Content-Type:MIME-Version; b=h1uZEXsLam75iUrxbfGTgxH0DIX5o3wtZjGaTivoBZzlFEjNNAUKNKXE5FrpPV27Q+wZ0ozYavKM1qRbEKs6ZGeOPvt6sdC/qO1BU45SWkCV/+Ng4uGa/cbSwT9ZhYQri8ndJbZOohnQ+WdP7CrWIXiT8u4v2mTHHs3BpjKdxh49v8NDXFlz8uIrYsDseJbqdEu1c4Tf7r3b8DsATfjYN31jiLQ3VG1zfcKh/Der/uVyZhdjvPZniErx3hoZmj2U398d5/vVoc+biN3mt6g66DV1amDgU7B0anVBQ6IcGdFbyY5JfPJ8LoR8AZ1VdM+mdUSyP4FalnVq2YKUG5PEoA==
ARC-Authentication-Results: i=1; lists.ozlabs.org; dmarc=pass (p=quarantine dis=none) header.from=xiaomi.com; spf=pass (client-ip=207.226.244.123; helo=outboundhk.mxmail.xiaomi.com; envelope-from=huangjianan@xiaomi.com; receiver=lists.ozlabs.org) smtp.mailfrom=xiaomi.com
Authentication-Results: lists.ozlabs.org; dmarc=pass (p=quarantine dis=none) header.from=xiaomi.com
Authentication-Results: lists.ozlabs.org; spf=pass (sender SPF authorized) smtp.mailfrom=xiaomi.com (client-ip=207.226.244.123; helo=outboundhk.mxmail.xiaomi.com; envelope-from=huangjianan@xiaomi.com; receiver=lists.ozlabs.org)
X-Greylist: delayed 63 seconds by postgrey-1.37 at boromir; Mon, 19 May 2025 12:38:43 AEST
Received: from outboundhk.mxmail.xiaomi.com (outboundhk.mxmail.xiaomi.com [207.226.244.123])
	by lists.ozlabs.org (Postfix) with ESMTP id 4b121b0TQtz2ydl
	for <linux-erofs@lists.ozlabs.org>; Mon, 19 May 2025 12:38:42 +1000 (AEST)
X-CSE-ConnectionGUID: O3PCM7j1Sl+TALW0UcYdtw==
X-CSE-MsgGUID: o6QvhGI/SnyBf1PqG/mClg==
X-IronPort-AV: E=Sophos;i="6.15,299,1739808000"; 
   d="scan'208";a="140459874"
From: Huang Jianan <huangjianan@xiaomi.com>
To: Bo Liu <liubo03@inspur.com>
CC: "linux-erofs@lists.ozlabs.org" <linux-erofs@lists.ozlabs.org>,
	"linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
	"xiang@kernel.org" <xiang@kernel.org>, "chao@kernel.org" <chao@kernel.org>
Subject: Re: [External Mail][PATCH v3] erofs: support deflate decompress by
 using Intel QAT
Thread-Topic: [External Mail][PATCH v3] erofs: support deflate decompress by
 using Intel QAT
Thread-Index: AQHbxjzIj6IXfXEXSkKQpYQTU74Kz7PYuzuA
Date: Mon, 19 May 2025 02:37:34 +0000
Message-ID: <c93aab13-7a9a-4188-803e-14b8df6a8109@xiaomi.com>
References: <20250516082634.3801-1-liubo03@inspur.com>
In-Reply-To: <20250516082634.3801-1-liubo03@inspur.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.237.8.164]
Content-Type: text/plain; charset="utf-8"
Content-ID: <74620D427DB66A4C86C13BE8938784F4@xiaomi.com>
Content-Transfer-Encoding: base64
X-Mailing-List: linux-erofs@lists.ozlabs.org
List-Id: <linux-erofs.lists.ozlabs.org>
List-Help: <mailto:linux-erofs+help@lists.ozlabs.org>
List-Owner: <mailto:linux-erofs+owner@lists.ozlabs.org>
List-Post: <mailto:linux-erofs@lists.ozlabs.org>
List-Subscribe: <mailto:linux-erofs+subscribe@lists.ozlabs.org>,
  <mailto:linux-erofs+subscribe-digest@lists.ozlabs.org>,
  <mailto:linux-erofs+subscribe-nomail@lists.ozlabs.org>
List-Unsubscribe: <mailto:linux-erofs+unsubscribe@lists.ozlabs.org>
Precedence: list
MIME-Version: 1.0
X-Spam-Status: No, score=-0.0 required=3.0 tests=SPF_HELO_PASS,SPF_PASS
	autolearn=disabled version=4.0.1
X-Spam-Checker-Version: SpamAssassin 4.0.1 (2024-03-25) on lists.ozlabs.org

T24gMjAyNS81LzE2IDE2OjI2LCBCbyBMaXUgd3JvdGU6DQo+IFvlpJbpg6jpgq7ku7ZdIOatpOmC
ruS7tuadpea6kOS6juWwj+exs+WFrOWPuOWklumDqO+8jOivt+iwqOaFjuWkhOeQhuOAguiLpeWv
uemCruS7tuWuieWFqOaAp+WtmOeWke+8jOivt+WwhumCruS7tui9rOWPkee7mW1pc2VjQHhpYW9t
aS5jb23ov5vooYzlj43ppogNCj4gDQo+IFRoaXMgcGF0Y2ggaW50cm9kdWVjZXMgdGhlIHVzZSBv
ZiB0aGUgSW50ZWwgUUFUIHRvIGRlY29tcHJlc3MgY29tcHJlc3NlZA0KPiBkYXRhIGluIHRoZSBF
Uk9GUyBmaWxlc3lzdGVtLCBhaW1pbmcgdG8gaW1wcm92ZSB0aGUgZGVjb21wcmVzc2lvbiBzcGVl
ZA0KPiBvZiBjb21wcmVzc2VkIGRhdGVhLg0KPiANCj4gV2UgY3JlYXRlZCBhIDI4NU1pQiBjb21w
cmVzc2VkIGZpbGUgYW5kIHRoZW4gdXNlZCB0aGUgZm9sbG93aW5nIGNvbW1hbmQgdG8NCj4gY3Jl
YXRlIEVST0ZTIGltYWdlcyB3aXRoIGRpZmZlcmVudCBjbHVzdGVyIHNpemUuDQo+ICAgICAgICMg
bWtmcy5lcm9mcyAtemRlZmxhdGUsbGV2ZWw9OSAtQzE2Mzg0DQo+IA0KPiBmaW8gY29tbWFuZCB3
YXMgdXNlZCB0byB0ZXN0IHJhbmRvbSByZWFkIGFuZCBzbWFsbCByYW5kb20gcmVhZCh+NSUpIGFu
ZA0KPiBzZXF1ZW50aWFsIHJlYWQgcGVyZm9ybWFuY2UuDQo+ICAgICAgICMgZmlvIC1maWxlbmFt
ZT10ZXN0ZmlsZSAgLWJzPTRrIC1ydz1yZWFkIC1uYW1lPWpvYjENCj4gICAgICAgIyBmaW8gLWZp
bGVuYW1lPXRlc3RmaWxlICAtYnM9NGsgLXJ3PXJhbmRyZWFkIC1uYW1lPWpvYjENCj4gICAgICAg
IyBmaW8gLWZpbGVuYW1lPXRlc3RmaWxlICAtYnM9NGsgLXJ3PXJhbmRyZWFkIC0taW9fc2l6ZT0x
NG0gLW5hbWU9am9iMQ0KPiANCj4gSGVyZSBhcmUgc29tZSBwZXJmb3JtYW5jZSBudW1iZXJzIGZv
ciByZWZlcmVuY2U6DQo+IA0KPiBQcm9jZXNzb3JzOiBJbnRlbChSKSBYZW9uKFIpIDY3NjZFKDE0
NCBjb3JlKQ0KPiBNZW1vcnk6ICAgICA1MjEgR2lCDQo+IA0KPiB8LS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS18DQo+IHwgICAgICAgICAgIHwgQ2x1c3RlciBzaXplIHwgc2VxdWVudGlhbCByZWFkIHwgcmFu
ZHJlYWQgIHwgc21hbGwgcmFuZHJlYWQoNSUpIHwNCj4gfC0tLS0tLS0tLS0tfC0tLS0tLS0tLS0t
LS0tfC0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLS0tfA0K
PiB8IEludGVsIFFBVCB8ICAgIDQwOTYgICAgICB8ICAgIDUzOCAgTWlCL3MgICB8IDExMiBNaUIv
cyB8ICAgICAyMC43NiBNaUIvcyAgICB8DQo+IHwgSW50ZWwgUUFUIHwgICAgMTYzODQgICAgIHwg
ICAgNjk5ICBNaUIvcyAgIHwgMTU4IE1pQi9zIHwgICAgIDIxLjAyIE1pQi9zICAgIHwNCj4gfCBJ
bnRlbCBRQVQgfCAgICA2NTUzNiAgICAgfCAgICA5MTcgIE1pQi9zICAgfCAyNzggTWlCL3MgfCAg
ICAgMjAuOTAgTWlCL3MgICAgfA0KPiB8IEludGVsIFFBVCB8ICAgIDEzMTA3MiAgICB8ICAgIDEw
NTYgTWlCL3MgICB8IDM1MSBNaUIvcyB8ICAgICAyMy4zNiBNaUIvcyAgICB8DQo+IHwgSW50ZWwg
UUFUIHwgICAgMjYyMTQ0ICAgIHwgICAgMTE0NSBNaUIvcyAgIHwgNDMxIE1pQi9zIHwgICAgIDI2
LjY2IE1pQi9zICAgIHwNCj4gfCBkZWZsYXRlICAgfCAgICA0MDk2ICAgICAgfCAgICA0OTkgIE1p
Qi9zICAgfCAxMDggTWlCL3MgfCAgICAgMjEuNTAgTWlCL3MgICAgfA0KPiB8IGRlZmxhdGUgICB8
ICAgIDE2Mzg0ICAgICB8ICAgIDQyMiAgTWlCL3MgICB8IDEyNSBNaUIvcyB8ICAgICAxOC45NCBN
aUIvcyAgICB8DQo+IHwgZGVmbGF0ZSAgIHwgICAgNjU1MzYgICAgIHwgICAgNDUyICBNaUIvcyAg
IHwgMTU5IE1pQi9zIHwgICAgIDEzLjAyIE1pQi9zICAgIHwNCj4gfCBkZWZsYXRlICAgfCAgICAx
MzEwNzIgICAgfCAgICA0NTIgIE1pQi9zICAgfCAxNzcgTWlCL3MgfCAgICAgMTEuNDQgTWlCL3Mg
ICAgfA0KPiB8IGRlZmxhdGUgICB8ICAgIDI2MjE0NCAgICB8ICAgIDQ2NiAgTWlCL3MgICB8IDE5
NCBNaUIvcyB8ICAgICAxMC42MCBNaUIvcyAgICB8DQo+IA0KPiBTaWduZWQtb2ZmLWJ5OiBCbyBM
aXUgPGxpdWJvMDNAaW5zcHVyLmNvbT4NCj4gLS0tDQo+IHYxOiBodHRwczovL2xvcmUua2VybmVs
Lm9yZy9saW51eC1lcm9mcy8yMDI1MDQxMDA0MjA0OC4zMDQ0LTEtbGl1Ym8wM0BpbnNwdXIuY29t
Lw0KPiB2MjogaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcvbGludXgtZXJvZnMvMjAyNTA0MTAwNDIw
NDguMzA0NC0xLWxpdWJvMDNAaW5zcHVyLmNvbS9ULyN0DQo+IA0KPiBDaGFuZ2VzIHNpbmNlIHYy
Og0KPiAgIC0gQWRkIGEgbmV3IGtlcm5lbCBjb25maWcgb3B0aW9uIENPTkZJR19FUk9GU19GU19a
SVBfQ1JZUFRPLg0KPiAgIC0gTW9kaWZ5IHRoZSBzeXNmcyBpbnRlcmZhY2UgdG8gbWVyZ2UgZW5h
YmxlIGFuZCBkaXNhYmxlIGludG8NCj4gICAgIGEgc2luZ2xlIGVudHJ5IHBvaW50LCBhbmQgYWRk
IGEgcmVhZCBmdW5jdGlvbiB0byB2aWV3IHRoZSBjdXJyZW50IHN0YXRlLg0KPiAgIC0gT3B0aW1p
emUgdGhlIHJlbGV2YW50IGNvZGUsdXNlIHRoZSBzZ19hbGxvY190YWJsZV9mcm9tX3BhZ2VzX3Nl
Z21lbnQgaW50ZXJmYWNlLg0KPiANCj4gICBmcy9lcm9mcy9LY29uZmlnICAgICAgICAgICAgICAg
IHwgIDE0ICsrKw0KPiAgIGZzL2Vyb2ZzL01ha2VmaWxlICAgICAgICAgICAgICAgfCAgIDEgKw0K
PiAgIGZzL2Vyb2ZzL2NvbXByZXNzLmggICAgICAgICAgICAgfCAgMTQgKysrDQo+ICAgZnMvZXJv
ZnMvZGVjb21wcmVzc29yX2NyeXB0by5jICB8IDE5OSArKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKw0KPiAgIGZzL2Vyb2ZzL2RlY29tcHJlc3Nvcl9kZWZsYXRlLmMgfCAgMTYgKystDQo+
ICAgZnMvZXJvZnMvc3lzZnMuYyAgICAgICAgICAgICAgICB8ICAzNiArKysrKysNCj4gICA2IGZp
bGVzIGNoYW5nZWQsIDI3OSBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pDQo+ICAgY3JlYXRl
IG1vZGUgMTAwNjQ0IGZzL2Vyb2ZzL2RlY29tcHJlc3Nvcl9jcnlwdG8uYw0KPiANCj4gZGlmZiAt
LWdpdCBhL2ZzL2Vyb2ZzL0tjb25maWcgYi9mcy9lcm9mcy9LY29uZmlnDQo+IGluZGV4IDMzMWU0
OWNkMWI4ZC4uZGI0OWFlM2MxOTIyIDEwMDY0NA0KPiAtLS0gYS9mcy9lcm9mcy9LY29uZmlnDQo+
ICsrKyBiL2ZzL2Vyb2ZzL0tjb25maWcNCj4gQEAgLTE0NCw2ICsxNDQsMjAgQEAgY29uZmlnIEVS
T0ZTX0ZTX1pJUF9aU1REDQo+IA0KPiAgICAgICAgICAgIElmIHVuc3VyZSwgc2F5IE4uDQo+IA0K
PiArY29uZmlnIEVST0ZTX0ZTX1pJUF9DUllQVE8NCj4gKyAgICAgICBib29sICJFUk9GUyBoYXJk
d2FyZSBkZWNvbXByZXNzaW9uIHN1cHBvcnQgKGNyeXB0byBpbnRlcmZhY2UpIg0KPiArICAgICAg
IGRlcGVuZHMgb24gRVJPRlNfRlNfWklQDQo+ICsgICAgICAgaGVscA0KPiArICAgICAgICAgU2F5
aW5nIFkgaGVyZSBpbmNsdWRlcyBzdXBwb3J0IGZvciByZWFkaW5nIEVST0ZTIGZpbGUgc3lzdGVt
cw0KPiArICAgICAgICAgY29udGFpbmluZyBjcnlwdG8gY29tcHJlc3NlZCBkYXRhLiAgSXQgZ2l2
ZXMgYmV0dGVyIGRlY29tcHJlc3Npb24NCj4gKyAgICAgICAgIHNwZWVkIHRoYW4gdGhlIHNvZnR3
YXJlLWltcGxlbWVudGVkIGNvbXByZXNzaW9uLCBhbmQgaXQgY29zdHMNCj4gKyAgICAgICAgIGxv
d2VyIENQVSBvdmVyaGVhZC4NCj4gKw0KPiArICAgICAgICAgQ3J5cHRvIHN1cHBvcnQgaXMgYW4g
ZXhwZXJpbWVudGFsIGZlYXR1cmUgZm9yIG5vdyBhbmQgc28gbW9zdA0KPiArICAgICAgICAgZmls
ZSBzeXN0ZW1zIHdpbGwgYmUgcmVhZGFibGUgd2l0aG91dCBzZWxlY3RpbmcgdGhpcyBvcHRpb24u
DQo+ICsNCj4gKyAgICAgICAgIElmIHVuc3VyZSwgc2F5IE4uDQo+ICsNCj4gICBjb25maWcgRVJP
RlNfRlNfT05ERU1BTkQNCj4gICAgICAgICAgYm9vbCAiRVJPRlMgZnNjYWNoZS1iYXNlZCBvbi1k
ZW1hbmQgcmVhZCBzdXBwb3J0IChkZXByZWNhdGVkKSINCj4gICAgICAgICAgZGVwZW5kcyBvbiBF
Uk9GU19GUw0KPiBkaWZmIC0tZ2l0IGEvZnMvZXJvZnMvTWFrZWZpbGUgYi9mcy9lcm9mcy9NYWtl
ZmlsZQ0KPiBpbmRleCA0MzMxZDUzYzcxMDkuLjI0N2IyNjNlYjY2NyAxMDA2NDQNCj4gLS0tIGEv
ZnMvZXJvZnMvTWFrZWZpbGUNCj4gKysrIGIvZnMvZXJvZnMvTWFrZWZpbGUNCj4gQEAgLTcsNSAr
Nyw2IEBAIGVyb2ZzLSQoQ09ORklHX0VST0ZTX0ZTX1pJUCkgKz0gZGVjb21wcmVzc29yLm8gem1h
cC5vIHpkYXRhLm8genV0aWwubw0KPiAgIGVyb2ZzLSQoQ09ORklHX0VST0ZTX0ZTX1pJUF9MWk1B
KSArPSBkZWNvbXByZXNzb3JfbHptYS5vDQo+ICAgZXJvZnMtJChDT05GSUdfRVJPRlNfRlNfWklQ
X0RFRkxBVEUpICs9IGRlY29tcHJlc3Nvcl9kZWZsYXRlLm8NCj4gICBlcm9mcy0kKENPTkZJR19F
Uk9GU19GU19aSVBfWlNURCkgKz0gZGVjb21wcmVzc29yX3pzdGQubw0KPiArZXJvZnMtJChDT05G
SUdfRVJPRlNfRlNfWklQX0NSWVBUTykgKz0gZGVjb21wcmVzc29yX2NyeXB0by5vDQo+ICAgZXJv
ZnMtJChDT05GSUdfRVJPRlNfRlNfQkFDS0VEX0JZX0ZJTEUpICs9IGZpbGVpby5vDQo+ICAgZXJv
ZnMtJChDT05GSUdfRVJPRlNfRlNfT05ERU1BTkQpICs9IGZzY2FjaGUubw0KPiBkaWZmIC0tZ2l0
IGEvZnMvZXJvZnMvY29tcHJlc3MuaCBiL2ZzL2Vyb2ZzL2NvbXByZXNzLmgNCj4gaW5kZXggMjcw
NGQ3YTU5MmE1Li4zNTZhZTI0NzNiZDUgMTAwNjQ0DQo+IC0tLSBhL2ZzL2Vyb2ZzL2NvbXByZXNz
LmgNCj4gKysrIGIvZnMvZXJvZnMvY29tcHJlc3MuaA0KPiBAQCAtNzAsMTAgKzcwLDI0IEBAIHN0
cnVjdCB6X2Vyb2ZzX3N0cmVhbV9kY3R4IHsNCj4gICAgICAgICAgYm9vbCBib3VuY2VkOyAgICAg
ICAgICAgICAgICAgICAvKiBpcyB0aGUgYm91bmNlIGJ1ZmZlciB1c2VkIG5vdz8gKi8NCj4gICB9
Ow0KPiANCj4gK3N0cnVjdCB6X2Vyb2ZzX2NyeXB0b19lbmdpbmUgew0KPiArICAgICAgIGNoYXIg
KmNyeXB0b19uYW1lOw0KPiArICAgICAgIGJvb2wgZW5hYmxlZDsNCj4gKyAgICAgICBzdHJ1Y3Qg
Y3J5cHRvX2Fjb21wICplcm9mc190Zm07DQo+ICt9Ow0KPiArDQo+ICtleHRlcm4gc3RydWN0IHpf
ZXJvZnNfY3J5cHRvX2VuZ2luZSB6X2Vyb2ZzX2NyeXB0b1taX0VST0ZTX0NPTVBSRVNTSU9OX01B
WF1bMl07DQo+ICsNCj4gICBpbnQgel9lcm9mc19zdHJlYW1fc3dpdGNoX2J1ZnMoc3RydWN0IHpf
ZXJvZnNfc3RyZWFtX2RjdHggKmRjdHgsIHZvaWQgKipkc3QsDQo+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgdm9pZCAqKnNyYywgc3RydWN0IHBhZ2UgKipwZ3BsKTsNCj4gICBpbnQg
el9lcm9mc19maXh1cF9pbnNpemUoc3RydWN0IHpfZXJvZnNfZGVjb21wcmVzc19yZXEgKnJxLCBj
b25zdCBjaGFyICpwYWRidWYsDQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5zaWduZWQg
aW50IHBhZGJ1ZnNpemUpOw0KPiAgIGludCBfX2luaXQgel9lcm9mc19pbml0X2RlY29tcHJlc3Nv
cih2b2lkKTsNCj4gICB2b2lkIHpfZXJvZnNfZXhpdF9kZWNvbXByZXNzb3Iodm9pZCk7DQo+ICtp
bnQgel9lcm9mc19jcnlwdG9fZGVjb21wcmVzcyhzdHJ1Y3Qgel9lcm9mc19kZWNvbXByZXNzX3Jl
cSAqcnEsDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHN0cnVjdCBjcnlwdG9fYWNvbXAgKmVyb2ZzX3RmbSwgc3RydWN0IHBhZ2UgKipwZ3BsKTsNCj4g
K3N0cnVjdCBjcnlwdG9fYWNvbXAgKnpfZXJvZnNfY3J5cHRvX2dldF9lbmdpbmUoaW50IHR5cGUp
Ow0KPiAraW50IHpfZXJvZnNfY3J5cHRvX2VuYWJsZV9lbmdpbmUoY29uc3QgY2hhciAqbmFtZSk7
DQo+ICt2b2lkIHpfZXJvZnNfY3J5cHRvX2Rpc2FibGVfZW5naW5lKHZvaWQpOw0KPiAraW50IHpf
ZXJvZnNfY3J5cHRvX2VuZ2luZV9mb3JtYXQoY2hhciAqYnVmKTsNCj4gICAjZW5kaWYNCj4gZGlm
ZiAtLWdpdCBhL2ZzL2Vyb2ZzL2RlY29tcHJlc3Nvcl9jcnlwdG8uYyBiL2ZzL2Vyb2ZzL2RlY29t
cHJlc3Nvcl9jcnlwdG8uYw0KPiBuZXcgZmlsZSBtb2RlIDEwMDY0NA0KPiBpbmRleCAwMDAwMDAw
MDAwMDAuLjU1ZjZhOWU2ZGNmNg0KPiAtLS0gL2Rldi9udWxsDQo+ICsrKyBiL2ZzL2Vyb2ZzL2Rl
Y29tcHJlc3Nvcl9jcnlwdG8uYw0KPiBAQCAtMCwwICsxLDE5OSBAQA0KPiArLy8gU1BEWC1MaWNl
bnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb3ItbGF0ZXINCj4gKyNpbmNsdWRlIDxsaW51eC9zY2F0
dGVybGlzdC5oPg0KPiArI2luY2x1ZGUgPGNyeXB0by9hY29tcHJlc3MuaD4NCj4gKw0KPiArI2lu
Y2x1ZGUgImNvbXByZXNzLmgiDQo+ICsNCj4gK3N0YXRpYyBpbnQgel9lcm9mc19jcnlwdG9fZGVj
b21wcmVzc19tZW0oc3RydWN0IHpfZXJvZnNfZGVjb21wcmVzc19yZXEgKnJxLA0KPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBjcnlwdG9fYWNvbXAgKmVyb2ZzX3RmbSkN
Cj4gK3sNCj4gKyAgICAgICBzdHJ1Y3Qgc2dfdGFibGUgc3Rfc3JjLCBzdF9kc3Q7DQo+ICsgICAg
ICAgc3RydWN0IGFjb21wX3JlcSAqcmVxOw0KPiArICAgICAgIHN0cnVjdCBjcnlwdG9fd2FpdCB3
YWl0Ow0KPiArICAgICAgIHU4ICpoZWFkcGFnZTsNCj4gKyAgICAgICBpbnQgcmV0Ow0KPiArDQo+
ICsgICAgICAgaGVhZHBhZ2UgPSBrbWFwX2xvY2FsX3BhZ2UoKnJxLT5pbik7DQo+ICsgICAgICAg
cmV0ID0gel9lcm9mc19maXh1cF9pbnNpemUocnEsIGhlYWRwYWdlICsgcnEtPnBhZ2VvZnNfaW4s
DQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluX3QodW5zaWduZWQgaW50LCBy
cS0+aW5wdXRzaXplLA0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHJxLT5zYi0+c19ibG9ja3NpemUgLSBycS0+cGFnZW9mc19pbikpOw0K
PiArICAgICAgIGt1bm1hcF9sb2NhbChoZWFkcGFnZSk7DQo+ICsgICAgICAgaWYgKHJldCkNCj4g
KyAgICAgICAgICAgICAgIHJldHVybiByZXQ7DQo+ICsNCj4gKyAgICAgICByZXEgPSBhY29tcF9y
ZXF1ZXN0X2FsbG9jKGVyb2ZzX3RmbSk7DQo+ICsgICAgICAgaWYgKCFyZXEpIHsNCj4gKyAgICAg
ICAgICAgICAgIGVyb2ZzX2VycihycS0+c2IsICJmYWlsZWQgdG8gYWxsb2MgZGVjb21wcmVzcyBy
ZXF1ZXN0Iik7DQo+ICsgICAgICAgICAgICAgICByZXR1cm4gLUVOT01FTTsNCj4gKyAgICAgICB9
DQo+ICsNCj4gKyAgICAgICByZXQgPSBzZ19hbGxvY190YWJsZV9mcm9tX3BhZ2VzX3NlZ21lbnQo
JnN0X3NyYywNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJxLT5p
biwgcnEtPmlucGFnZXMsIHJxLT5wYWdlb2ZzX2luLA0KPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgcnEtPmlucHV0c2l6ZSwgVUlOVF9NQVgsIEdGUF9LRVJORUwpOw0K
PiArICAgICAgIGlmIChyZXQgPCAwKQ0KPiArICAgICAgICAgICAgICAgZ290byBmYWlsZWRfc3Jj
X2FsbG9jOw0KPiArDQo+ICsgICAgICAgcmV0ID0gc2dfYWxsb2NfdGFibGVfZnJvbV9wYWdlc19z
ZWdtZW50KCZzdF9kc3QsDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBycS0+b3V0LCBycS0+b3V0cGFnZXMsIHJxLT5wYWdlb2ZzX291dCwNCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJxLT5vdXRwdXRzaXplLCBVSU5UX01BWCwgR0ZQ
X0tFUk5FTCk7DQo+ICsgICAgICAgaWYgKHJldCA8IDApDQo+ICsgICAgICAgICAgICAgICBnb3Rv
IGZhaWxlZF9kc3RfYWxsb2M7DQo+ICsNCj4gKyAgICAgICBhY29tcF9yZXF1ZXN0X3NldF9wYXJh
bXMocmVxLCBzdF9zcmMuc2dsLA0KPiArICAgICAgICAgICAgICAgc3RfZHN0LnNnbCwgcnEtPmlu
cHV0c2l6ZSwgcnEtPm91dHB1dHNpemUpOw0KPiArDQo+ICsgICAgICAgY3J5cHRvX2luaXRfd2Fp
dCgmd2FpdCk7DQo+ICsgICAgICAgYWNvbXBfcmVxdWVzdF9zZXRfY2FsbGJhY2socmVxLCBDUllQ
VE9fVEZNX1JFUV9NQVlfQkFDS0xPRywNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBjcnlwdG9fcmVxX2RvbmUsICZ3YWl0KTsNCj4gKw0KPiArICAgICAgIHJldCA9IGNyeXB0b193
YWl0X3JlcShjcnlwdG9fYWNvbXBfZGVjb21wcmVzcyhyZXEpLCAmd2FpdCk7DQo+ICsgICAgICAg
aWYgKHJldCA8IDApIHsNCj4gKyAgICAgICAgICAgICAgIGVyb2ZzX2VycihycS0+c2IsICJmYWls
ZWQgdG8gZGVjb21wcmVzcyAlZCBpblsldSwgJXVdIG91dFsldV0iLA0KPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0LCBycS0+aW5wdXRzaXplLCBycS0+cGFnZW9m
c19pbiwgcnEtPm91dHB1dHNpemUpOw0KPiArICAgICAgICAgICAgICAgcmV0ID0gLUVJTzsNCj4g
KyAgICAgICB9IGVsc2UNCj4gKyAgICAgICAgICAgICAgIHJldCA9IDA7DQo+ICsNCj4gKyAgICAg
ICBzZ19mcmVlX3RhYmxlKCZzdF9kc3QpOw0KPiArZmFpbGVkX2RzdF9hbGxvYzoNCj4gKyAgICAg
ICBzZ19mcmVlX3RhYmxlKCZzdF9zcmMpOw0KPiArZmFpbGVkX3NyY19hbGxvYzoNCj4gKyAgICAg
ICBhY29tcF9yZXF1ZXN0X2ZyZWUocmVxKTsNCj4gKyAgICAgICByZXR1cm4gcmV0Ow0KPiArfQ0K
PiArDQo+ICtpbnQgel9lcm9mc19jcnlwdG9fZGVjb21wcmVzcyhzdHJ1Y3Qgel9lcm9mc19kZWNv
bXByZXNzX3JlcSAqcnEsDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0
IGNyeXB0b19hY29tcCAqZXJvZnNfdGZtLCBzdHJ1Y3QgcGFnZSAqKnBncGwpDQo+ICt7DQo+ICsg
ICAgICAgaW50IGk7DQo+ICsNCj4gKyAgICAgICBmb3IgKGkgPSAwOyBpIDwgcnEtPm91dHBhZ2Vz
OyBpKyspIHsNCj4gKyAgICAgICAgICAgICAgIHN0cnVjdCBwYWdlICpjb25zdCBwYWdlID0gcnEt
Pm91dFtpXTsNCj4gKyAgICAgICAgICAgICAgIHN0cnVjdCBwYWdlICp2aWN0aW07DQo+ICsNCj4g
KyAgICAgICAgICAgICAgIGlmICghcGFnZSkgew0KPiArICAgICAgICAgICAgICAgICAgICAgICB2
aWN0aW0gPSBfX2Vyb2ZzX2FsbG9jcGFnZShwZ3BsLCBycS0+Z2ZwLCB0cnVlKTsNCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgaWYgKCF2aWN0aW0pDQo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgcmV0dXJuIC1FTk9NRU07DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHNldF9w
YWdlX3ByaXZhdGUodmljdGltLCBaX0VST0ZTX1NIT1JUTElWRURfUEFHRSk7DQo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIHJxLT5vdXRbaV0gPSB2aWN0aW07DQo+ICsgICAgICAgICAgICAgICB9
DQo+ICsgICAgICAgfQ0KPiArDQo+ICsgICAgICAgcmV0dXJuIHpfZXJvZnNfY3J5cHRvX2RlY29t
cHJlc3NfbWVtKHJxLCBlcm9mc190Zm0pOw0KPiArfQ0KPiArDQo+ICtzdHJ1Y3QgY3J5cHRvX2Fj
b21wICp6X2Vyb2ZzX2NyeXB0b19nZXRfZW5naW5lKGludCB0eXBlKQ0KPiArew0KPiArICAgICAg
IGludCBpID0gMDsNCj4gKw0KPiArICAgICAgIHdoaWxlICh6X2Vyb2ZzX2NyeXB0b1t0eXBlXVtp
XS5jcnlwdG9fbmFtZSkgew0KPiArICAgICAgICAgICAgICAgaWYgKHpfZXJvZnNfY3J5cHRvW3R5
cGVdW2ldLmVuYWJsZWQpDQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB6X2Vyb2Zz
X2NyeXB0b1t0eXBlXVtpXS5lcm9mc190Zm07DQo+ICsgICAgICAgICAgICAgICBpKys7DQo+ICsg
ICAgICAgfQ0KPiArICAgICAgIHJldHVybiBOVUxMOw0KPiArfQ0KPiArDQo+ICtzdGF0aWMgaW50
IHpfZXJvZnNfY3J5cHRvX2dldF9jb21wcmVzc190eXBlKGNvbnN0IGNoYXIgKm5hbWUpDQo+ICt7
DQo+ICsgICAgICAgaW50IGksIGo7DQo+ICsNCj4gKyAgICAgICBmb3IgKGkgPSAwOyBpIDwgWl9F
Uk9GU19DT01QUkVTU0lPTl9NQVg7IGkrKykgew0KPiArICAgICAgICAgICAgICAgaiA9IDA7DQo+
ICsgICAgICAgICAgICAgICB3aGlsZSAoel9lcm9mc19jcnlwdG9baV1bal0uY3J5cHRvX25hbWUp
IHsNCg0KSXMgaXQgcG9zc2libGUgdG8gdXNlIHpfZXJvZnNfY3J5cHRvX2VuZ2luZSBpdHNlbGYg
aW5zdGVhZCBvZiBjcnlwdG9fbmFtZSB0bw0KY2hlY2sgaWYgdGhlcmUgaXMgYSBzdXBwb3J0ZWQg
Y29tcHJlc3Npb24gZW5naW5lLCBsaWtlOg0KDQojZGVmaW5lIFpfRVJPRlNfQ1JZUFRPX0VOR0lO
RV9NQVggMQ0Kc3RydWN0IHpfZXJvZnNfY3J5cHRvX2VuZ2luZSAqel9lcm9mc19jcnlwdG9bWl9F
Uk9GU19DT01QUkVTU0lPTl9NQVhdW1pfRVJPRlNfQ1JZUFRPX0VOR0lORV9NQVhdID0gew0KCVta
X0VST0ZTX0NPTVBSRVNTSU9OX0xaNF0gPSB7IH0sDQoJW1pfRVJPRlNfQ09NUFJFU1NJT05fTFpN
QV0gPSB7IH0sDQoJW1pfRVJPRlNfQ09NUFJFU1NJT05fREVGTEFURV0gPSB7DQoJCSYoc3RydWN0
IHpfZXJvZnNfY3J5cHRvX2VuZ2luZSkgew0KCQkJLmNyeXB0b19uYW1lID0gInFhdF9kZWZsYXRl
IiwNCgkJCS5lbmFibGVkID0gZmFsc2UsDQoJCQkuZXJvZnNfdGZtID0gTlVMTCwNCgkJfQ0KCX0s
DQoJW1pfRVJPRlNfQ09NUFJFU1NJT05fWlNURF0gPSB7DQoJfSwNCn07DQoNCmZvciAoaSA9IDA7
IHpfZXJvZnNfY3J5cHRvW3R5cGVdW2ldOyArK2kpIHsNCgkuLi4NCn0NCg0KPiArICAgICAgICAg
ICAgICAgICAgICAgICBpZiAoIXN0cmNtcChuYW1lLCB6X2Vyb2ZzX2NyeXB0b1tpXVtqXS5jcnlw
dG9fbmFtZSkpDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7DQo+
ICsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgaisrOw0KPiArICAgICAgICAgICAgICAgfQ0K
PiArICAgICAgIH0NCj4gKyAgICAgICByZXR1cm4gLUVJTlZBTDsNCj4gK30NCj4gKw0KPiAraW50
IHpfZXJvZnNfY3J5cHRvX2VuYWJsZV9lbmdpbmUoY29uc3QgY2hhciAqbmFtZSkNCj4gK3sNCj4g
KyAgICAgICBpbnQgaSA9IDAsIHR5cGU7DQo+ICsNCj4gKyAgICAgICB0eXBlID0gel9lcm9mc19j
cnlwdG9fZ2V0X2NvbXByZXNzX3R5cGUobmFtZSk7DQo+ICsgICAgICAgaWYgKHR5cGUgPCAwKQ0K
PiArICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7DQo+ICsNCj4gKyAgICAgICB3aGlsZSAo
el9lcm9mc19jcnlwdG9bdHlwZV1baV0uY3J5cHRvX25hbWUpIHsNCj4gKyAgICAgICAgICAgICAg
IGlmICghc3RyY21wKHpfZXJvZnNfY3J5cHRvW3R5cGVdW2ldLmNyeXB0b19uYW1lLCBuYW1lKSkg
ew0KPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoel9lcm9mc19jcnlwdG9bdHlwZV1baV0u
ZW5hYmxlZCkNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KTWF5
YmUgYW4gZXJyb3IgaXMgbmVlZGVkIHRvIGluZm9ybSBkdXBsaWNhdGUgZW5hYmxlLg0KDQo+ICsN
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgel9lcm9mc19jcnlwdG9bdHlwZV1baV0uZXJvZnNf
dGZtID0NCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcnlwdG9fYWxsb2NfYWNv
bXAoel9lcm9mc19jcnlwdG9bdHlwZV1baV0uY3J5cHRvX25hbWUsIDAsIDApOw0KPiArICAgICAg
ICAgICAgICAgICAgICAgICBpZiAoSVNfRVJSKHpfZXJvZnNfY3J5cHRvW3R5cGVdW2ldLmVyb2Zz
X3RmbSkpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6X2Vyb2ZzX2NyeXB0
b1t0eXBlXVtpXS5lcm9mc190Zm0gPSBOVUxMOw0KPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHJldHVybiAtRU5YSU87DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIH0NCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgel9lcm9mc19jcnlwdG9bdHlwZV1baV0uZW5hYmxlZCA9IHRy
dWU7DQo+ICsgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHpfZXJvZnNfY3J5cHRvW3R5cGVdW2ld
LmVuYWJsZWQpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHpfZXJvZnNfY3J5cHRv
W3R5cGVdW2ldLmVyb2ZzX3RmbSkNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBj
cnlwdG9fZnJlZV9hY29tcCh6X2Vyb2ZzX2NyeXB0b1t0eXBlXVtpXS5lcm9mc190Zm0pOw0KPiAr
ICAgICAgICAgICAgICAgICAgICAgICB6X2Vyb2ZzX2NyeXB0b1t0eXBlXVtpXS5lbmFibGVkID0g
ZmFsc2U7DQoNClRoaXMgbWF5IGJlIGNvbmN1cnJlbnQgd2l0aCB6X2Vyb2ZzX2RlZmxhdGVfZGVj
b21wcmVzcywgc28gaXQgc2hvdWxkIGJlDQpkaXNhYmxlZCBmaXJzdCBhbmQgbWF5IHJlcXVpcmUg
YSBtZW1vcnkgYmFycmllci4NCg0KPiArICAgICAgICAgICAgICAgfQ0KPiArICAgICAgICAgICAg
ICAgaSsrOw0KPiArICAgICAgIH0NCj4gKyAgICAgICByZXR1cm4gMDsNCj4gK30NCj4gKw0KPiAr
dm9pZCB6X2Vyb2ZzX2NyeXB0b19kaXNhYmxlX2VuZ2luZSh2b2lkKQ0KPiArew0KPiArICAgICAg
IGludCBpID0gMCwgdHlwZTsNCj4gKw0KPiArICAgICAgIGZvciAodHlwZSA9IDA7IHR5cGUgPCBa
X0VST0ZTX0NPTVBSRVNTSU9OX01BWDsgdHlwZSsrKSB7DQo+ICsgICAgICAgICAgICAgICBpID0g
MDsNCj4gKyAgICAgICAgICAgICAgIHdoaWxlICh6X2Vyb2ZzX2NyeXB0b1t0eXBlXVtpXS5jcnlw
dG9fbmFtZSkgew0KPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoel9lcm9mc19jcnlwdG9b
dHlwZV1baV0uZW5hYmxlZCAmJg0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgel9lcm9mc19jcnlwdG9bdHlwZV1baV0uZXJvZnNfdGZtKSB7DQo+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgY3J5cHRvX2ZyZWVfYWNvbXAoel9lcm9mc19jcnlwdG9bdHlw
ZV1baV0uZXJvZnNfdGZtKTsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6X2Vy
b2ZzX2NyeXB0b1t0eXBlXVtpXS5lcm9mc190Zm0gPSBOVUxMOw0KPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIHpfZXJvZnNfY3J5cHRvW3R5cGVdW2ldLmVuYWJsZWQgPSBmYWxzZTsN
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgfQ0KPiArICAgICAgICAgICAgICAgICAgICAgICBp
Kys7DQo+ICsgICAgICAgICAgICAgICB9DQo+ICsgICAgICAgfQ0KPiArfQ0KPiArDQo+ICtpbnQg
el9lcm9mc19jcnlwdG9fZW5naW5lX2Zvcm1hdChjaGFyICpidWYpDQo+ICt7DQo+ICsgICAgICAg
aW50IHR5cGUsIGksIGxlbiA9IDA7DQo+ICsNCj4gKyAgICAgICBmb3IgKHR5cGUgPSAwOyB0eXBl
IDwgWl9FUk9GU19DT01QUkVTU0lPTl9NQVg7IHR5cGUrKykgew0KPiArICAgICAgICAgICAgICAg
aSA9IDA7DQo+ICsgICAgICAgICAgICAgICB3aGlsZSAoel9lcm9mc19jcnlwdG9bdHlwZV1baV0u
Y3J5cHRvX25hbWUpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgaWYgKHpfZXJvZnNfY3J5
cHRvW3R5cGVdW2ldLmVuYWJsZWQpDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
bGVuICs9IHNjbnByaW50ZihidWYgKyBsZW4sIFBBVEhfTUFYIC0gbGVuLCAiJXMgIiwNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6X2Vy
b2ZzX2NyeXB0b1t0eXBlXVtpXS5jcnlwdG9fbmFtZSk7DQo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGkrKzsNCj4gKyAgICAgICAgICAgICAgIH0NCj4gKyAgICAgICB9DQo+ICsgICAgICAgcmV0
dXJuIGxlbjsNCj4gK30NCj4gKw0KPiArc3RydWN0IHpfZXJvZnNfY3J5cHRvX2VuZ2luZSB6X2Vy
b2ZzX2NyeXB0b1taX0VST0ZTX0NPTVBSRVNTSU9OX01BWF1bMl0gPSB7DQo+ICsgICAgICAgW1pf
RVJPRlNfQ09NUFJFU1NJT05fTFo0XSA9IHsNCj4gKyAgICAgICAgICAgICAgIChzdHJ1Y3Qgel9l
cm9mc19jcnlwdG9fZW5naW5lKSB7TlVMTH0sDQo+ICsgICAgICAgICAgICAgICAoc3RydWN0IHpf
ZXJvZnNfY3J5cHRvX2VuZ2luZSkge05VTEx9LA0KPiArICAgICAgIH0sDQo+ICsgICAgICAgW1pf
RVJPRlNfQ09NUFJFU1NJT05fTFpNQV0gPSB7DQo+ICsgICAgICAgICAgICAgICAoc3RydWN0IHpf
ZXJvZnNfY3J5cHRvX2VuZ2luZSkge05VTEx9LA0KPiArICAgICAgICAgICAgICAgKHN0cnVjdCB6
X2Vyb2ZzX2NyeXB0b19lbmdpbmUpIHtOVUxMfSwNCj4gKyAgICAgICB9LA0KPiArICAgICAgIFta
X0VST0ZTX0NPTVBSRVNTSU9OX0RFRkxBVEVdID0gew0KPiArICAgICAgICAgICAgICAgKHN0cnVj
dCB6X2Vyb2ZzX2NyeXB0b19lbmdpbmUpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgLmNy
eXB0b19uYW1lID0gInFhdF9kZWZsYXRlIiwNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgLmVu
YWJsZWQgPSBmYWxzZSwNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgLmVyb2ZzX3RmbSA9IE5V
TEwsDQo+ICsgICAgICAgICAgICAgICB9LA0KPiArICAgICAgICAgICAgICAgKHN0cnVjdCB6X2Vy
b2ZzX2NyeXB0b19lbmdpbmUpIHtOVUxMfSwNCj4gKyAgICAgICB9LA0KPiArICAgICAgIFtaX0VS
T0ZTX0NPTVBSRVNTSU9OX1pTVERdID0gew0KPiArICAgICAgICAgICAgICAgKHN0cnVjdCB6X2Vy
b2ZzX2NyeXB0b19lbmdpbmUpIHtOVUxMfSwNCj4gKyAgICAgICAgICAgICAgIChzdHJ1Y3Qgel9l
cm9mc19jcnlwdG9fZW5naW5lKSB7TlVMTH0sDQo+ICsgICAgICAgfSwNCj4gK307DQo+IGRpZmYg
LS1naXQgYS9mcy9lcm9mcy9kZWNvbXByZXNzb3JfZGVmbGF0ZS5jIGIvZnMvZXJvZnMvZGVjb21w
cmVzc29yX2RlZmxhdGUuYw0KPiBpbmRleCBjNjkwOGE0ODcwNTQuLmJlYmJmMWVjY2QzZCAxMDA2
NDQNCj4gLS0tIGEvZnMvZXJvZnMvZGVjb21wcmVzc29yX2RlZmxhdGUuYw0KPiArKysgYi9mcy9l
cm9mcy9kZWNvbXByZXNzb3JfZGVmbGF0ZS5jDQo+IEBAIC05Nyw3ICs5Nyw3IEBAIHN0YXRpYyBp
bnQgel9lcm9mc19sb2FkX2RlZmxhdGVfY29uZmlnKHN0cnVjdCBzdXBlcl9ibG9jayAqc2IsDQo+
ICAgICAgICAgIHJldHVybiAtRU5PTUVNOw0KPiAgIH0NCj4gDQo+IC1zdGF0aWMgaW50IHpfZXJv
ZnNfZGVmbGF0ZV9kZWNvbXByZXNzKHN0cnVjdCB6X2Vyb2ZzX2RlY29tcHJlc3NfcmVxICpycSwN
Cj4gK3N0YXRpYyBpbnQgX196X2Vyb2ZzX2RlZmxhdGVfZGVjb21wcmVzcyhzdHJ1Y3Qgel9lcm9m
c19kZWNvbXByZXNzX3JlcSAqcnEsDQo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN0cnVjdCBwYWdlICoqcGdwbCkNCj4gICB7DQo+ICAgICAgICAgIHN0cnVjdCBzdXBl
cl9ibG9jayAqc2IgPSBycS0+c2I7DQo+IEBAIC0xNzgsNiArMTc4LDIwIEBAIHN0YXRpYyBpbnQg
el9lcm9mc19kZWZsYXRlX2RlY29tcHJlc3Moc3RydWN0IHpfZXJvZnNfZGVjb21wcmVzc19yZXEg
KnJxLA0KPiAgICAgICAgICByZXR1cm4gZXJyOw0KPiAgIH0NCj4gDQo+ICtzdGF0aWMgaW50IHpf
ZXJvZnNfZGVmbGF0ZV9kZWNvbXByZXNzKHN0cnVjdCB6X2Vyb2ZzX2RlY29tcHJlc3NfcmVxICpy
cSwNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGFnZSAqKnBncGwp
DQo+ICt7DQo+ICsjaWZkZWYgQ09ORklHX0VST0ZTX0ZTX1pJUF9DUllQVE8NCj4gKyAgICAgICBz
dHJ1Y3QgY3J5cHRvX2Fjb21wICplcm9mc190Zm0gPSBOVUxMOw0KPiArDQo+ICsgICAgICAgZXJv
ZnNfdGZtID0gel9lcm9mc19jcnlwdG9fZ2V0X2VuZ2luZShaX0VST0ZTX0NPTVBSRVNTSU9OX0RF
RkxBVEUpOw0KPiArICAgICAgIGlmIChlcm9mc190Zm0gJiYgIXJxLT5wYXJ0aWFsX2RlY29kaW5n
KQ0KPiArICAgICAgICAgICAgICAgcmV0dXJuIHpfZXJvZnNfY3J5cHRvX2RlY29tcHJlc3MocnEs
IGVyb2ZzX3RmbSwgcGdwbCk7DQo+ICsgICAgICAgZWxzZQ0KDQpVbm5lY2Vzc2FyeSBlbHNlLg0K
DQo+ICsjZW5kaWYNCj4gKyAgICAgICAgICAgICAgIHJldHVybiBfX3pfZXJvZnNfZGVmbGF0ZV9k
ZWNvbXByZXNzKHJxLCBwZ3BsKTsNCj4gK30NCj4gKw0KPiAgIGNvbnN0IHN0cnVjdCB6X2Vyb2Zz
X2RlY29tcHJlc3NvciB6X2Vyb2ZzX2RlZmxhdGVfZGVjb21wID0gew0KPiAgICAgICAgICAuY29u
ZmlnID0gel9lcm9mc19sb2FkX2RlZmxhdGVfY29uZmlnLA0KPiAgICAgICAgICAuZGVjb21wcmVz
cyA9IHpfZXJvZnNfZGVmbGF0ZV9kZWNvbXByZXNzLA0KPiBkaWZmIC0tZ2l0IGEvZnMvZXJvZnMv
c3lzZnMuYyBiL2ZzL2Vyb2ZzL3N5c2ZzLmMNCj4gaW5kZXggZGFkNGU2YzZjMTU1Li4wMDEyM2M0
ZDMxOTYgMTAwNjQ0DQo+IC0tLSBhL2ZzL2Vyb2ZzL3N5c2ZzLmMNCj4gKysrIGIvZnMvZXJvZnMv
c3lzZnMuYw0KPiBAQCAtNywxMiArNywxNCBAQA0KPiAgICNpbmNsdWRlIDxsaW51eC9rb2JqZWN0
Lmg+DQo+IA0KPiAgICNpbmNsdWRlICJpbnRlcm5hbC5oIg0KPiArI2luY2x1ZGUgImNvbXByZXNz
LmgiDQo+IA0KPiAgIGVudW0gew0KPiAgICAgICAgICBhdHRyX2ZlYXR1cmUsDQo+ICAgICAgICAg
IGF0dHJfZHJvcF9jYWNoZXMsDQo+ICAgICAgICAgIGF0dHJfcG9pbnRlcl91aSwNCj4gICAgICAg
ICAgYXR0cl9wb2ludGVyX2Jvb2wsDQo+ICsgICAgICAgYXR0cl9jcnlwdG8sDQo+ICAgfTsNCj4g
DQo+ICAgZW51bSB7DQo+IEBAIC02MCw2ICs2Miw5IEBAIHN0YXRpYyBzdHJ1Y3QgZXJvZnNfYXR0
ciBlcm9mc19hdHRyXyMjX25hbWUgPSB7ICAgICAgICAgICAgICAgICAgICAgICBcDQo+ICAgRVJP
RlNfQVRUUl9SV19VSShzeW5jX2RlY29tcHJlc3MsIGVyb2ZzX21vdW50X29wdHMpOw0KPiAgIEVS
T0ZTX0FUVFJfRlVOQyhkcm9wX2NhY2hlcywgMDIwMCk7DQo+ICAgI2VuZGlmDQo+ICsjaWZkZWYg
Q09ORklHX0VST0ZTX0ZTX1pJUF9DUllQVE8NCj4gK0VST0ZTX0FUVFJfRlVOQyhjcnlwdG8sIDA2
NDQpOw0KPiArI2VuZGlmDQo+IA0KPiAgIHN0YXRpYyBzdHJ1Y3QgYXR0cmlidXRlICplcm9mc19h
dHRyc1tdID0gew0KPiAgICNpZmRlZiBDT05GSUdfRVJPRlNfRlNfWklQDQo+IEBAIC05NSw2ICsx
MDAsOSBAQCBzdGF0aWMgc3RydWN0IGF0dHJpYnV0ZSAqZXJvZnNfZmVhdF9hdHRyc1tdID0gew0K
PiAgICAgICAgICBBVFRSX0xJU1QoZnJhZ21lbnRzKSwNCj4gICAgICAgICAgQVRUUl9MSVNUKGRl
ZHVwZSksDQo+ICAgICAgICAgIEFUVFJfTElTVCg0OGJpdCksDQo+ICsjaWZkZWYgQ09ORklHX0VS
T0ZTX0ZTX1pJUF9DUllQVE8NCj4gKyAgICAgICBBVFRSX0xJU1QoY3J5cHRvKSwNCj4gKyNlbmRp
Zg0KPiAgICAgICAgICBOVUxMLA0KPiAgIH07DQo+ICAgQVRUUklCVVRFX0dST1VQUyhlcm9mc19m
ZWF0KTsNCj4gQEAgLTEyOCw2ICsxMzYsMTAgQEAgc3RhdGljIHNzaXplX3QgZXJvZnNfYXR0cl9z
aG93KHN0cnVjdCBrb2JqZWN0ICprb2JqLA0KPiAgICAgICAgICAgICAgICAgIGlmICghcHRyKQ0K
PiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7DQo+ICAgICAgICAgICAgICAgICAg
cmV0dXJuIHN5c2ZzX2VtaXQoYnVmLCAiJWRcbiIsICooYm9vbCAqKXB0cik7DQo+ICsjaWZkZWYg
Q09ORklHX0VST0ZTX0ZTX1pJUF9DUllQVE8NCj4gKyAgICAgICBjYXNlIGF0dHJfY3J5cHRvOg0K
PiArICAgICAgICAgICAgICAgcmV0dXJuIHpfZXJvZnNfY3J5cHRvX2VuZ2luZV9mb3JtYXQoYnVm
KTsNCj4gKyNlbmRpZg0KPiAgICAgICAgICB9DQo+ICAgICAgICAgIHJldHVybiAwOw0KPiAgIH0N
Cj4gQEAgLTE0MSw2ICsxNTMsMTAgQEAgc3RhdGljIHNzaXplX3QgZXJvZnNfYXR0cl9zdG9yZShz
dHJ1Y3Qga29iamVjdCAqa29iaiwgc3RydWN0IGF0dHJpYnV0ZSAqYXR0ciwNCj4gICAgICAgICAg
dW5zaWduZWQgY2hhciAqcHRyID0gX19zdHJ1Y3RfcHRyKHNiaSwgYS0+c3RydWN0X3R5cGUsIGEt
Pm9mZnNldCk7DQo+ICAgICAgICAgIHVuc2lnbmVkIGxvbmcgdDsNCj4gICAgICAgICAgaW50IHJl
dDsNCj4gKyNpZmRlZiBDT05GSUdfRVJPRlNfRlNfWklQX0NSWVBUTw0KPiArICAgICAgIGNoYXIg
KmNyeXB0b19uYW1lOw0KPiArICAgICAgIHNpemVfdCBzejsNCj4gKyNlbmRpZg0KPiANCj4gICAg
ICAgICAgc3dpdGNoIChhLT5hdHRyX2lkKSB7DQo+ICAgICAgICAgIGNhc2UgYXR0cl9wb2ludGVy
X3VpOg0KPiBAQCAtMTgxLDYgKzE5NywyNiBAQCBzdGF0aWMgc3NpemVfdCBlcm9mc19hdHRyX3N0
b3JlKHN0cnVjdCBrb2JqZWN0ICprb2JqLCBzdHJ1Y3QgYXR0cmlidXRlICphdHRyLA0KPiAgICAg
ICAgICAgICAgICAgIGlmICh0ICYgMSkNCj4gICAgICAgICAgICAgICAgICAgICAgICAgIGludmFs
aWRhdGVfbWFwcGluZ19wYWdlcyhNTkdEX01BUFBJTkcoc2JpKSwgMCwgLTEpOw0KPiAgICAgICAg
ICAgICAgICAgIHJldHVybiBsZW47DQo+ICsjZW5kaWYNCj4gKyNpZmRlZiBDT05GSUdfRVJPRlNf
RlNfWklQX0NSWVBUTw0KPiArICAgICAgIGNhc2UgYXR0cl9jcnlwdG86DQo+ICsgICAgICAgICAg
ICAgICBidWYgPSBza2lwX3NwYWNlcyhidWYpOw0KPiArICAgICAgICAgICAgICAgc3ogPSBzdHJs
ZW4oYnVmKTsNCj4gKyAgICAgICAgICAgICAgIGNyeXB0b19uYW1lID0ga3N0cmR1cChidWYsIEdG
UF9LRVJORUwpOw0KPiArICAgICAgICAgICAgICAgaWYgKCFjcnlwdG9fbmFtZSkNCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07DQo+ICsNCj4gKyAgICAgICAgICAgICAg
IC8qIGlnbm9yZSB0cmFpbGluZyBuZXdsaW5lICovDQo+ICsgICAgICAgICAgICAgICBpZiAoc3og
PiAwICYmIGNyeXB0b19uYW1lW3N6IC0gMV0gPT0gJ1xuJykNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgY3J5cHRvX25hbWVbc3ogLSAxXSA9IDB4MDA7DQo+ICsNCj4gKyAgICAgICAgICAgICAg
IGlmIChzdHJsZW4oY3J5cHRvX25hbWUpID4gMCkgew0KPiArICAgICAgICAgICAgICAgICAgICAg
ICByZXQgPSB6X2Vyb2ZzX2NyeXB0b19lbmFibGVfZW5naW5lKGNyeXB0b19uYW1lKTsNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgaWYgKHJldCA8IDApDQo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgcmV0dXJuIHJldDsNCj4gKyAgICAgICAgICAgICAgIH0gZWxzZQ0KPiArICAg
ICAgICAgICAgICAgICAgICAgICB6X2Vyb2ZzX2NyeXB0b19kaXNhYmxlX2VuZ2luZSgpOw0KDQpJ
cyBpdCBwb3NzaWJsZSB0byBzdXBwb3J0IGRpc2FibGUgYSBzaW5nbGUgZW5naW5lPw0KDQpUaGFu
a3MsDQpKaWFuYW4NCg0KPiArICAgICAgICAgICAgICAgcmV0dXJuIGxlbjsNCj4gICAjZW5kaWYN
Cj4gICAgICAgICAgfQ0KPiAgICAgICAgICByZXR1cm4gMDsNCj4gLS0NCj4gMi4zMS4xDQo+IA0K
PiANCg0K

