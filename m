Return-Path: <linux-erofs-bounces+lists+linux-erofs=lfdr.de@lists.ozlabs.org>
X-Original-To: lists+linux-erofs@lfdr.de
Delivered-To: lists+linux-erofs@lfdr.de
Received: from lists.ozlabs.org (lists.ozlabs.org [112.213.38.117])
	by mail.lfdr.de (Postfix) with ESMTPS id 5086496D7D5
	for <lists+linux-erofs@lfdr.de>; Thu,  5 Sep 2024 14:03:28 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=lists.ozlabs.org;
	s=201707; t=1725537806;
	bh=BB8u57I8Gz9JdcLuWdDe6dvBAVtUjVxuVoARFwTsuHI=;
	h=To:Subject:Date:References:In-Reply-To:List-Id:List-Unsubscribe:
	 List-Archive:List-Post:List-Help:List-Subscribe:From:Reply-To:
	 From;
	b=dG2zJCNcPwGpLWHaKDngox5dlXakAhi5aXRk34kDjtBmecYCe5Plz/0av404aC56v
	 I7l5yEgKbmAhG60NraQgjT/7ACgG0vWNVTZzCdzHbp8f1XXkbUAYUCLxKfQrThOEsk
	 EEzOzqOWa4JHQfBER6FwjO+InJIBKSUJ52cE+4C4qOaiY7K0YN0CVPcN2euR052ExY
	 IJ5eVrAP/NDow3UO9ouJyORr5qWcF2bXtxl9WQxdZHvk2wtZvdbVfFPATgq7hv2zxO
	 eZBTMLL7ylyIYApb218hyEnXlbNUnzsstuQgA8/xhMZaNl73qL+SQg6RJlnJpNPzIX
	 SmeQfwAxw9poA==
Received: from boromir.ozlabs.org (localhost [IPv6:::1])
	by lists.ozlabs.org (Postfix) with ESMTP id 4WzygL2K69z2yxY
	for <lists+linux-erofs@lfdr.de>; Thu,  5 Sep 2024 22:03:26 +1000 (AEST)
X-Original-To: linux-erofs@lists.ozlabs.org
Delivered-To: linux-erofs@lists.ozlabs.org
Authentication-Results: lists.ozlabs.org; arc=none smtp.remote-ip=118.143.206.90
ARC-Seal: i=1; a=rsa-sha256; d=lists.ozlabs.org; s=201707; t=1725537800;
	cv=none; b=Lc9DGWi0neuv+GKfJi9xRB89XyhfRE8S1suHO0sKK62JNhs4DW5LT8WEFTjK2HV6ecKWpbxnhg3F9nV9ZUX3WfR1DFk26efKkQMKwHP+o/CFCz2de+gsLGz44Ywa5AnopYa+wGMF8ZYV96XqSHozQGcq1pWLCYuOayb1rlnS3wj55FUbYR7Kvas9iDcfUl34SWqRKY1/HkYZoyly3KAS99fMkF83DI419/sHBgAe7omTSZ4JcBHeUzp/lQgtS8GEZimuIIRP8cZV0CLhH5cwtc9KyfHMoVOqG9NJRkbMBPIiRdB1eIaux7evG1qBEHJb6nsfijQqXcYKxQd6G3mDCw==
ARC-Message-Signature: i=1; a=rsa-sha256; d=lists.ozlabs.org; s=201707;
	t=1725537800; c=relaxed/relaxed;
	bh=BB8u57I8Gz9JdcLuWdDe6dvBAVtUjVxuVoARFwTsuHI=;
	h=From:To:Subject:Date:Message-ID:References:In-Reply-To:
	 Content-Type:MIME-Version; b=LCw2kEIYHYBWYIv5PgXgrDW0z161WNNDF6TjZWXSJa+57puS2z4veCel850dYIWm5uLC6DGAVk4PTKVzkM39ju/0PnVRDsXN9K4mj6vAbKiPASBCkHQZI/NsGjZNQB1xigoGd40MRzL5Nhb2Q3g2pvP+5B9TYgoI11oLdgU7W5RYYMiRUArKdMi0lR0dY0MmqC7Uti6XALqlzxVZqfb+tz1cmnf0ZG86FomT9VPZFtno1GTnIJQ+cPqJV7TTNs5CSr4+mvsYwWK5Lz7ThIBBDlz606n4+fW5eSflvfhsFo0nr3WMttTU9DRSXfOC4+gIaSzwmizl4La7+uzHHRbAfQ==
ARC-Authentication-Results: i=1; lists.ozlabs.org; dmarc=pass (p=quarantine dis=none) header.from=xiaomi.com; spf=pass (client-ip=118.143.206.90; helo=outboundhk.mxmail.xiaomi.com; envelope-from=huangjianan@xiaomi.com; receiver=lists.ozlabs.org) smtp.mailfrom=xiaomi.com
Authentication-Results: lists.ozlabs.org; dmarc=pass (p=quarantine dis=none) header.from=xiaomi.com
Authentication-Results: lists.ozlabs.org; spf=pass (sender SPF authorized) smtp.mailfrom=xiaomi.com (client-ip=118.143.206.90; helo=outboundhk.mxmail.xiaomi.com; envelope-from=huangjianan@xiaomi.com; receiver=lists.ozlabs.org)
X-Greylist: delayed 63 seconds by postgrey-1.37 at boromir; Thu, 05 Sep 2024 22:03:19 AEST
Received: from outboundhk.mxmail.xiaomi.com (outboundhk.mxmail.xiaomi.com [118.143.206.90])
	by lists.ozlabs.org (Postfix) with ESMTP id 4WzygC2c0Hz2ytg
	for <linux-erofs@lists.ozlabs.org>; Thu,  5 Sep 2024 22:03:19 +1000 (AEST)
X-CSE-ConnectionGUID: MlO8NFfRROmBB2JINtubdA==
X-CSE-MsgGUID: qRoQ/vWUSkurwToEgNXn/A==
X-IronPort-AV: E=Sophos;i="6.10,204,1719849600"; 
   d="scan'208";a="95530293"
To: Hongzhen Luo <hongzhen@linux.alibaba.com>, "linux-erofs@lists.ozlabs.org"
	<linux-erofs@lists.ozlabs.org>
Subject: Re: [External Mail][PATCH v4] erofs-utils: fsck: introduce exporting
 xattrs
Thread-Topic: [External Mail][PATCH v4] erofs-utils: fsck: introduce exporting
 xattrs
Thread-Index: AQHa/4gGm30GGbNtJk+1xCJncsjrf7JIkaqA
Date: Thu, 5 Sep 2024 12:02:08 +0000
Message-ID: <b1932b1a-e30a-4665-a268-32b4b74d648c@xiaomi.com>
References: <20240905113723.1937634-1-hongzhen@linux.alibaba.com>
In-Reply-To: <20240905113723.1937634-1-hongzhen@linux.alibaba.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.237.88.13]
Content-Type: text/plain; charset="utf-8"
Content-ID: <6D13EE3BA53EF846976688DA5F9750B8@xiaomi.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-BeenThere: linux-erofs@lists.ozlabs.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: Development of Linux EROFS file system <linux-erofs.lists.ozlabs.org>
List-Unsubscribe: <https://lists.ozlabs.org/options/linux-erofs>,
 <mailto:linux-erofs-request@lists.ozlabs.org?subject=unsubscribe>
List-Archive: <http://lists.ozlabs.org/pipermail/linux-erofs/>
List-Post: <mailto:linux-erofs@lists.ozlabs.org>
List-Help: <mailto:linux-erofs-request@lists.ozlabs.org?subject=help>
List-Subscribe: <https://lists.ozlabs.org/listinfo/linux-erofs>,
 <mailto:linux-erofs-request@lists.ozlabs.org?subject=subscribe>
From: Huang Jianan via Linux-erofs <linux-erofs@lists.ozlabs.org>
Reply-To: Huang Jianan <huangjianan@xiaomi.com>
Errors-To: linux-erofs-bounces+lists+linux-erofs=lfdr.de@lists.ozlabs.org
Sender: "Linux-erofs" <linux-erofs-bounces+lists+linux-erofs=lfdr.de@lists.ozlabs.org>

T24gMjAyNC85LzUgMTk6MzcsIEhvbmd6aGVuIEx1byB3cm90ZToNCj4gDQo+IFRoZSBjdXJyZW50
IGBmc2NrIC0tZXh0cmFjdGAgZG9lcyBub3Qgc3VwcG9ydCBleHBvcnRpbmcgdGhlIGV4dGVuZGVk
DQo+IGF0dHJpYnV0ZXMgb2YgZmlsZXMuIFRoaXMgcGF0Y2ggYWRkcyBgLS14YXR0cnNgIG9wdGlv
biB0byBkdW1wIHRoZQ0KPiBleHRlbmRlZCBhdHRyaWJ1dGVzLCBhcyB3ZWxsIGFzIHRoZSBgLS1u
by14YXR0cnNgIG9wdGlvbiB0byBub3QgZHVtcA0KPiB0aGUgZXh0ZW5kZWQgYXR0cmlidXRlcy4N
Cj4gDQo+IFNpZ25lZC1vZmYtYnk6IEhvbmd6aGVuIEx1byA8aG9uZ3poZW5AbGludXguYWxpYmFi
YS5jb20+DQo+IC0tLQ0KPiB2NDogT3B0aW1pemUgdGhlIGVycm9yIG1lc3NhZ2VzIGFuZCBjb2Rl
Lg0KPiB2MzogaHR0cHM6Ly9sb3JlLmtlcm5lbC5vcmcvYWxsLzIwMjQwOTAzMTEzNzI5LjM1Mzk1
NzgtMS1ob25nemhlbkBsaW51eC5hbGliYWJhLmNvbS8NCj4gdjI6IGh0dHBzOi8vbG9yZS5rZXJu
ZWwub3JnL2FsbC8yMDI0MDkwMzA4NTY0My4zMzkzMDEyLTEtaG9uZ3poZW5AbGludXguYWxpYmFi
YS5jb20vDQo+IHYxOiBodHRwczovL2xvcmUua2VybmVsLm9yZy9hbGwvMjAyNDA5MDMwNzM1MTcu
MzMxMTQwNy0xLWhvbmd6aGVuQGxpbnV4LmFsaWJhYmEuY29tLw0KPiAtLS0NCj4gICBmc2NrL21h
aW4uYyB8IDgzICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrLS0tDQo+ICAgMSBmaWxlIGNoYW5nZWQsIDc5IGluc2VydGlvbnMoKyksIDQgZGVsZXRpb25z
KC0pDQo+IA0KPiBkaWZmIC0tZ2l0IGEvZnNjay9tYWluLmMgYi9mc2NrL21haW4uYw0KPiBpbmRl
eCAyOGYxZTdlLi4xODM2NjVjIDEwMDY0NA0KPiAtLS0gYS9mc2NrL21haW4uYw0KPiArKysgYi9m
c2NrL21haW4uYw0KPiBAQCAtOSw2ICs5LDcgQEANCj4gICAjaW5jbHVkZSA8dXRpbWUuaD4NCj4g
ICAjaW5jbHVkZSA8dW5pc3RkLmg+DQo+ICAgI2luY2x1ZGUgPHN5cy9zdGF0Lmg+DQo+ICsjaW5j
bHVkZSA8c3lzL3hhdHRyLmg+DQo+ICAgI2luY2x1ZGUgImVyb2ZzL3ByaW50LmgiDQo+ICAgI2lu
Y2x1ZGUgImVyb2ZzL2NvbXByZXNzLmgiDQo+ICAgI2luY2x1ZGUgImVyb2ZzL2RlY29tcHJlc3Mu
aCINCj4gQEAgLTMxLDYgKzMyLDcgQEAgc3RydWN0IGVyb2ZzZnNja19jZmcgew0KPiAgICAgICAg
ICBib29sIG92ZXJ3cml0ZTsNCj4gICAgICAgICAgYm9vbCBwcmVzZXJ2ZV9vd25lcjsNCj4gICAg
ICAgICAgYm9vbCBwcmVzZXJ2ZV9wZXJtczsNCj4gKyAgICAgICBib29sIGR1bXBfeGF0dHJzOw0K
PiAgIH07DQo+ICAgc3RhdGljIHN0cnVjdCBlcm9mc2ZzY2tfY2ZnIGZzY2tjZmc7DQo+IA0KPiBA
QCAtNDgsNiArNTAsOCBAQCBzdGF0aWMgc3RydWN0IG9wdGlvbiBsb25nX29wdGlvbnNbXSA9IHsN
Cj4gICAgICAgICAgeyJuby1wcmVzZXJ2ZS1vd25lciIsIG5vX2FyZ3VtZW50LCAwLCAxMH0sDQo+
ICAgICAgICAgIHsibm8tcHJlc2VydmUtcGVybXMiLCBub19hcmd1bWVudCwgMCwgMTF9LA0KPiAg
ICAgICAgICB7Im9mZnNldCIsIHJlcXVpcmVkX2FyZ3VtZW50LCAwLCAxMn0sDQo+ICsgICAgICAg
eyJ4YXR0cnMiLCBub19hcmd1bWVudCwgMCwgMTN9LA0KPiArICAgICAgIHsibm8teGF0dHJzIiwg
bm9fYXJndW1lbnQsIDAsIDE0fSwNCj4gICAgICAgICAgezAsIDAsIDAsIDB9LA0KPiAgIH07DQo+
IA0KPiBAQCAtOTgsNiArMTAyLDggQEAgc3RhdGljIHZvaWQgdXNhZ2UoaW50IGFyZ2MsIGNoYXIg
Kiphcmd2KQ0KPiAgICAgICAgICAgICAgICAgICIgLS1leHRyYWN0Wz1YXSAgICAgICAgICBjaGVj
ayBpZiBhbGwgZmlsZXMgYXJlIHdlbGwgZW5jb2RlZCwgb3B0aW9uYWxseVxuIg0KPiAgICAgICAg
ICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0IHRvIFhcbiINCj4gICAg
ICAgICAgICAgICAgICAiIC0tb2Zmc2V0PSMgICAgICAgICAgICAgc2tpcCAjIGJ5dGVzIGF0IHRo
ZSBiZWdpbm5pbmcgb2YgSU1BR0VcbiINCj4gKyAgICAgICAgICAgICAgICIgLS14YXR0cnMgICAg
ICAgICAgICAgICBkdW1wIGV4dGVuZGVkIGF0dHJpYnV0ZXMgKGRlZmF1bHQpXG4iDQo+ICsgICAg
ICAgICAgICAgICAiIC0tbm8teGF0dHJzICAgICAgICAgICAgZG8gbm90IGR1bXAgZXh0ZW5kZWQg
YXR0cmlidXRlc1xuIg0KDQpIb3cgYWJvdXQ6DQoNCiIgLS1bbm8tXXhhdHRycyAgd2hldGhlciB0
byBkdW1wIGV4dGVuZGVkIGF0dHJpYnV0ZXMgKGRlZmF1bHQgb24pXG4iDQoNClRvIGtlZXAgdGhl
IHNhbWUgc3R5bGUgYXMgdGhlIG90aGVyIHN3aXRjaCBvcHRpb25zLg0KDQpUaGFua3MsDQpKaWFu
YW4NCg0KPiAgICAgICAgICAgICAgICAgICJcbiINCj4gICAgICAgICAgICAgICAgICAiIC1hLCAt
QSwgLXkgICAgICAgICAgICAgbm8tb3AsIGZvciBjb21wYXRpYmlsaXR5IHdpdGggZnNjayBvZiBv
dGhlciBmaWxlc3lzdGVtc1xuIg0KPiAgICAgICAgICAgICAgICAgICJcbiINCj4gQEAgLTIyNSw2
ICsyMzEsMTIgQEAgc3RhdGljIGludCBlcm9mc2ZzY2tfcGFyc2Vfb3B0aW9uc19jZmcoaW50IGFy
Z2MsIGNoYXIgKiphcmd2KQ0KPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1
cm4gLUVJTlZBTDsNCj4gICAgICAgICAgICAgICAgICAgICAgICAgIH0NCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgIGJyZWFrOw0KPiArICAgICAgICAgICAgICAgY2FzZSAxMzoNCj4gKyAgICAg
ICAgICAgICAgICAgICAgICAgZnNja2NmZy5kdW1wX3hhdHRycyA9IHRydWU7DQo+ICsgICAgICAg
ICAgICAgICAgICAgICAgIGJyZWFrOw0KPiArICAgICAgICAgICAgICAgY2FzZSAxNDoNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgZnNja2NmZy5kdW1wX3hhdHRycyA9IGZhbHNlOw0KPiArICAg
ICAgICAgICAgICAgICAgICAgICBicmVhazsNCj4gICAgICAgICAgICAgICAgICBkZWZhdWx0Og0K
PiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC1FSU5WQUw7DQo+ICAgICAgICAgICAg
ICAgICAgfQ0KPiBAQCAtNDExLDYgKzQyMyw2MCBAQCBvdXQ6DQo+ICAgICAgICAgIHJldHVybiBy
ZXQ7DQo+ICAgfQ0KPiANCj4gK3N0YXRpYyBpbnQgZXJvZnNmc2NrX2R1bXBfeGF0dHJzKHN0cnVj
dCBlcm9mc19pbm9kZSAqaW5vZGUpDQo+ICt7DQo+ICsgICAgICAgY2hhciAqa2V5bHN0LCAqa2V5
Ow0KPiArICAgICAgIHNzaXplX3Qga2xsZW47DQo+ICsgICAgICAgaW50IHJldDsNCj4gKw0KPiAr
ICAgICAgIGtsbGVuID0gZXJvZnNfbGlzdHhhdHRyKGlub2RlLCBOVUxMLCAwKTsNCj4gKyAgICAg
ICBpZiAoa2xsZW4gPD0gMCkNCj4gKyAgICAgICAgICAgICAgIHJldHVybiBrbGxlbjsNCj4gKyAg
ICAgICBrZXlsc3QgPSBtYWxsb2Moa2xsZW4pOw0KPiArICAgICAgIGlmICgha2V5bHN0KQ0KPiAr
ICAgICAgICAgICAgICAgcmV0dXJuIC1FTk9NRU07DQo+ICsgICAgICAgcmV0ID0gZXJvZnNfbGlz
dHhhdHRyKGlub2RlLCBrZXlsc3QsIGtsbGVuKTsNCj4gKyAgICAgICBpZiAocmV0IDwgMCkNCj4g
KyAgICAgICAgICAgICAgIGdvdG8gb3V0Ow0KPiArICAgICAgIGZvciAoa2V5ID0ga2V5bHN0OyBr
ZXkgPCBrZXlsc3QgKyBrbGxlbjsga2V5ICs9IHN0cmxlbihrZXkpICsgMSkgew0KPiArICAgICAg
ICAgICAgICAgdm9pZCAqdmFsdWUgPSBOVUxMOw0KPiArICAgICAgICAgICAgICAgc2l6ZV90IHNp
emUgPSAwOw0KPiArDQo+ICsgICAgICAgICAgICAgICByZXQgPSBlcm9mc19nZXR4YXR0cihpbm9k
ZSwga2V5LCBOVUxMLCAwKTsNCj4gKyAgICAgICAgICAgICAgIGlmIChyZXQgPCAwKQ0KPiArICAg
ICAgICAgICAgICAgICAgICAgICBicmVhazsNCj4gKyAgICAgICAgICAgICAgIGlmIChyZXQpIHsN
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IHJldDsNCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgdmFsdWUgPSBtYWxsb2Moc2l6ZSk7DQo+ICsgICAgICAgICAgICAgICAgICAgICAg
IGlmICghdmFsdWUpIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAt
RU5PTUVNOw0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KPiArICAg
ICAgICAgICAgICAgICAgICAgICB9DQo+ICsgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IGVy
b2ZzX2dldHhhdHRyKGlub2RlLCBrZXksIHZhbHVlLCBzaXplKTsNCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgaWYgKHJldCA8IDApIHsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBlcm9mc19lcnIoImZhaWwgdG8gZ2V0IHhhdHRyICVzIEAgbmlkICVsbHUiLA0KPiArICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXksIGlub2RlLT5uaWQgfCAwVUxM
KTsNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmVlKHZhbHVlKTsNCj4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgfQ0KPiArICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnNja2NmZy5leHRyYWN0X3Bh
dGgpDQo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gc2V0eGF0dHIoZnNj
a2NmZy5leHRyYWN0X3BhdGgsIGtleSwgdmFsdWUsDQo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSwgMCk7DQo+ICsgICAgICAgICAgICAgICAgICAg
ICAgIGVsc2UNCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAwOw0KPiAr
ICAgICAgICAgICAgICAgICAgICAgICBmcmVlKHZhbHVlKTsNCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgaWYgKHJldCkgew0KPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyb2Zz
X2VycigiZmFpbCB0byBzZXQgeGF0dHIgJXMgQCBuaWQgJWxsdSIsDQo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSwgaW5vZGUtPm5pZCB8IDBVTEwpOw0KPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KPiArICAgICAgICAgICAgICAg
ICAgICAgICB9DQo+ICsgICAgICAgICAgICAgICB9DQo+ICsgICAgICAgfQ0KPiArb3V0Og0KPiAr
ICAgICAgIGZyZWUoa2V5bHN0KTsNCj4gKyAgICAgICByZXR1cm4gcmV0Ow0KPiArfQ0KPiArDQo+
ICAgc3RhdGljIGludCBlcm9mc192ZXJpZnlfaW5vZGVfZGF0YShzdHJ1Y3QgZXJvZnNfaW5vZGUg
Kmlub2RlLCBpbnQgb3V0ZmQpDQo+ICAgew0KPiAgICAgICAgICBzdHJ1Y3QgZXJvZnNfbWFwX2Js
b2NrcyBtYXAgPSB7DQo+IEBAIC05MDAsMTUgKzk2NiwyMyBAQCBzdGF0aWMgaW50IGVyb2ZzZnNj
a19jaGVja19pbm9kZShlcm9mc19uaWRfdCBwbmlkLCBlcm9mc19uaWRfdCBuaWQpDQo+ICAgICAg
ICAgICAgICAgICAgZ290byBvdXQ7DQo+ICAgICAgICAgIH0NCj4gDQo+IC0gICAgICAgLyogdmVy
aWZ5IHhhdHRyIGZpZWxkICovDQo+IC0gICAgICAgcmV0ID0gZXJvZnNfdmVyaWZ5X3hhdHRyKCZp
bm9kZSk7DQo+IC0gICAgICAgaWYgKHJldCkNCj4gLSAgICAgICAgICAgICAgIGdvdG8gb3V0Ow0K
PiArICAgICAgIGlmICghZnNja2NmZy5jaGVja19kZWNvbXApIHsNCj4gKyAgICAgICAgICAgICAg
IC8qIHZlcmlmeSB4YXR0ciBmaWVsZCAqLw0KPiArICAgICAgICAgICAgICAgcmV0ID0gZXJvZnNf
dmVyaWZ5X3hhdHRyKCZpbm9kZSk7DQo+ICsgICAgICAgICAgICAgICBpZiAocmV0KQ0KPiArICAg
ICAgICAgICAgICAgICAgICAgICBnb3RvIG91dDsNCj4gKyAgICAgICB9DQo+IA0KPiAgICAgICAg
ICByZXQgPSBlcm9mc2ZzY2tfZXh0cmFjdF9pbm9kZSgmaW5vZGUpOw0KPiAgICAgICAgICBpZiAo
cmV0ICYmIHJldCAhPSAtRUNBTkNFTEVEKQ0KPiAgICAgICAgICAgICAgICAgIGdvdG8gb3V0Ow0K
PiANCj4gKyAgICAgICBpZiAoZnNja2NmZy5jaGVja19kZWNvbXAgJiYgZnNja2NmZy5kdW1wX3hh
dHRycykgew0KPiArICAgICAgICAgICAgICAgcmV0ID0gZXJvZnNmc2NrX2R1bXBfeGF0dHJzKCZp
bm9kZSk7DQo+ICsgICAgICAgICAgICAgICBpZiAocmV0KQ0KPiArICAgICAgICAgICAgICAgICAg
ICAgICByZXR1cm4gcmV0Ow0KPiArICAgICAgIH0NCj4gKw0KPiAgICAgICAgICAvKiBYWFhYOiB0
aGUgZGlyIGRlcHRoIHNob3VsZCBiZSByZXN0cmljdGVkIGluIG9yZGVyIHRvIGF2b2lkIGxvb3Bz
ICovDQo+ICAgICAgICAgIGlmIChTX0lTRElSKGlub2RlLmlfbW9kZSkpIHsNCj4gICAgICAgICAg
ICAgICAgICBzdHJ1Y3QgZXJvZnNfZGlyX2NvbnRleHQgY3R4ID0gew0KPiBAQCAtOTU1LDYgKzEw
MjksNyBAQCBpbnQgbWFpbihpbnQgYXJnYywgY2hhciAqYXJndltdKQ0KPiAgICAgICAgICBmc2Nr
Y2ZnLm92ZXJ3cml0ZSA9IGZhbHNlOw0KPiAgICAgICAgICBmc2NrY2ZnLnByZXNlcnZlX293bmVy
ID0gZnNja2NmZy5zdXBlcnVzZXI7DQo+ICAgICAgICAgIGZzY2tjZmcucHJlc2VydmVfcGVybXMg
PSBmc2NrY2ZnLnN1cGVydXNlcjsNCj4gKyAgICAgICBmc2NrY2ZnLmR1bXBfeGF0dHJzID0gdHJ1
ZTsNCj4gDQo+ICAgICAgICAgIGVyciA9IGVyb2ZzZnNja19wYXJzZV9vcHRpb25zX2NmZyhhcmdj
LCBhcmd2KTsNCj4gICAgICAgICAgaWYgKGVycikgew0KPiAtLQ0KPiAyLjQzLjUNCj4gDQoNCg==
